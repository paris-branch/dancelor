(executables
 (names main)
 (libraries
  js_of_ocaml-lwt
  cohttp-lwt-unix
  dancelor.common
  dancelor.nes)
 (modules :standard \ dancelor_client_api)
 (preprocess (pps lwt_ppx js_of_ocaml-ppx)))

 (library
  (name dancelor_client_api)
  (modules dancelor_client_api)
  (public_name dancelor.client.api)
  (preprocess (pps lwt_ppx js_of_ocaml-ppx))
  (libraries
    js_of_ocaml-lwt
    cohttp-lwt-unix
    dancelor.common
    dancelor.nes))

(install
 (section share)
 (files (main.bc.js as main.js)))
